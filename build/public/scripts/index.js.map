{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/public/scripts/index.ts"],"names":[],"mappings":"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","sourcesContent":["\r\ninterface JQuery{\r\n\ttooltip(): void;\r\n\tpopover(): void;\r\n\tmagnificPopup(MagOptions): void;\r\n\tmodal(\r\n\t\tsetting?: string,\r\n\t\toptions?: { [key: string]: string | undefined }\r\n\t): void;\r\n}\r\nclass Index {\r\n\tfileURL = '';\r\n\r\n\tform: Element = document.querySelector('#select-file');\r\n\tattachBtn: HTMLInputElement = document.querySelector('#chat-input-file');\r\n\tfileForm: Element = document.querySelector('#send-file-form');\r\n\tfileDownload: Element = document.querySelector('.file-download');\r\n\tconverting: Element = document.querySelector('.converting');\r\n\r\n\tinit = (): void => {\r\n\t\tthis.onAddSendFileMessage();\r\n\t\tthis.onAttchBtnClick();\r\n\t\tthis.onDownloadFileClick();\r\n\t}\r\n\r\n\tonAddSendFileMessage = (): void =>{ this.fileForm && this.fileForm.addEventListener('submit', this.onSendFileSubmitCallBack); }\r\n\tonRemoveSendFileMessage = (): void=>{ this.fileForm.removeEventListener('submit', this.onSendFileSubmitCallBack); }\r\n\tonSendFileSubmitCallBack = (e: Event)=>{\r\n\t\te.preventDefault();\r\n\t\tif(this.attachBtn && this.attachBtn.files.length > 0 && this.attachBtn.files[0]){\r\n\t\t\tconst file = this.attachBtn.files[0];\r\n\r\n\t\t\tconst fd = new FormData();\r\n\t\t\tfd.append('excelFileURL', file);\r\n\r\n\t\t\t(document.querySelector('.sendfile-btn-close') as HTMLButtonElement).click();\r\n\t\t\tthis.converting.classList.remove('invisible');\r\n\t\t\tthis.converting.classList.add('visible');\r\n\t\t\tthis.sendFileToConvert(fd);\r\n\t\t}\r\n\t}\r\n\tonAttchBtnClick = (): void=>{\r\n\t\tthis.attachBtn.addEventListener('change', (e)=>{\r\n\t\t\tconst file = (e.target as HTMLInputElement).files[0];\r\n\t\t\tif(file){\r\n\t\t\t\tconst addModalBtn = document.createElement('button');\r\n\t\t\t\tif(file.size > 5242880){\r\n\t\t\t\t\taddModalBtn.setAttribute('data-bs-target', '#filetolarge');\r\n\t\t\t\t}else if(file.type !== \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"){\r\n\t\t\t\t\taddModalBtn.setAttribute('data-bs-target', '#wrongFileType');\r\n\t\t\t\t}else{\r\n\t\t\t\t\taddModalBtn.setAttribute('data-bs-target', '#sendfile');\r\n\t\t\t\t}\r\n\t\t\t\taddModalBtn.setAttribute('type', 'button');\r\n\t\t\t\taddModalBtn.setAttribute('data-bs-toggle', 'modal');\r\n\t\t\t\tdocument.body.appendChild(addModalBtn);\r\n\t\t\t\tdocument.querySelectorAll('.file-name')[0].innerHTML = file && file.name;\r\n\t\t\t\tdocument.querySelectorAll('.file-name')[1].innerHTML = file && file.name;\r\n\t\t\t\tdocument.querySelectorAll('.file-name')[2].innerHTML = file && file.name;\r\n\t\t\t\tdocument.querySelectorAll('.file-size')[0].innerHTML = file && this.formatBytes(file.size);\r\n\t\t\t\tdocument.querySelectorAll('.file-size')[1].innerHTML = file && this.formatBytes(file.size);\r\n\t\t\t\tdocument.querySelectorAll('.file-size')[2].innerHTML = file && this.formatBytes(file.size);\r\n\t\t\t\taddModalBtn.click();\r\n\t\t\t\tdocument.body.removeChild(addModalBtn);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tonDownloadFileClick = (): void =>{\r\n\t\tthis.fileDownload.addEventListener('click', ()=>{\r\n\t\t\tthis.getFIle(this.updateFileURL(this.fileURL), `${new Date().toISOString().replace(/:/g, '-')}-pods.xlsx`);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleFileDownloadBtn = (toggle: string): void=>{\r\n\t\tif(toggle === 'show'){\r\n\t\t\tthis.fileDownload.classList.remove('invisible');\r\n\t\t\tthis.fileDownload.classList.add('visible');\r\n\t\t}else if(toggle === 'hide'){\r\n\t\t\tthis.fileDownload.classList.remove('visible');\r\n\t\t\tthis.fileDownload.classList.add('invisible');\r\n\t\t}\r\n\t}\r\n\ttoggleConvertingLoader = (toggle: string): void=>{\r\n\t\tif(toggle === 'show'){\r\n\t\t\tthis.converting.classList.remove('invisible');\r\n\t\t\tthis.converting.classList.add('visible');\r\n\t\t}else if(toggle === 'hide'){\r\n\t\t\tthis.converting.classList.remove('visible');\r\n\t\t\tthis.converting.classList.add('invisible');\r\n\t\t}\r\n\t}\r\n\tshowWrongFormatModal = (): void=>{\r\n\t\tconst addModalBtn = document.createElement('button');\r\n\t\taddModalBtn.setAttribute('data-bs-target', '#wrongFormat');\r\n\t\taddModalBtn.setAttribute('type', 'button');\r\n\t\taddModalBtn.setAttribute('data-bs-toggle', 'modal');\r\n\t\tdocument.body.appendChild(addModalBtn);\r\n\t\taddModalBtn.click();\r\n\t\tdocument.body.removeChild(addModalBtn);\r\n\t}\r\n\r\n\tsendFileToConvert = (data): void =>{\r\n\t\t$.post({\r\n\t\t\turl: '/api/file',\r\n\t\t\tdata: data,\r\n\t\t\tprocessData: false,\r\n\t\t\tcontentType: false\r\n\t\t}).done((response)=>{\r\n\t\t\tif(response.data.success){\r\n\t\t\t\tthis.fileURL = response.data.url;\r\n\t\t\t\tthis.toggleFileDownloadBtn('show');\r\n\t\t\t\tthis.toggleConvertingLoader('hide');\r\n\t\t\t}else{\r\n\t\t\t\tthis.toggleFileDownloadBtn('hide');\r\n\t\t\t\tthis.toggleConvertingLoader('hide');\r\n\t\t\t\tdocument.querySelector('.wrong-format-msg').innerHTML = (response.data.msg)? response.data.msg: 'Sorry somethignwent wrong, contact the developer';\r\n\t\t\t\tthis.showWrongFormatModal();\r\n\t\t\t}\r\n\t\t}).fail(err=>{\r\n\t\t\tif(err.responseJSON.statusCode === 400 && !err.responseJSON.data.success){\r\n\t\t\t\tthis.toggleFileDownloadBtn('hide');\r\n\t\t\t\tthis.toggleConvertingLoader('hide');\r\n\t\t\t\tdocument.querySelector('.wrong-format-msg').innerHTML = (err.responseJSON.data.msg)? err.responseJSON.data.msg: 'Sorry somethignwent wrong, contact the developer';\r\n\t\t\t\tthis.showWrongFormatModal();\r\n\t\t\t}\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\t}\r\n\tupdateFileURL(fileURL: string){\r\n\t\treturn 'api/' + fileURL;\r\n\t}\r\n\tformatBytes = (bytes, decimals = 2): string =>{\r\n\t    if (bytes === 0) return '0 Bytes';\r\n\r\n\t    const k = 1024;\r\n\t    const dm = decimals < 0 ? 0 : decimals;\r\n\t    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n\r\n\t    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n\t    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n\t}\r\n\tgetFIle = (url: string, filename: string): void=>{\r\n\t\t$.ajax({\r\n\t\t\turl: url,\r\n\t\t\txhrFields: {\r\n\t\t\t\tresponseType: 'blob'\r\n\t\t\t},\r\n\t\t\tsuccess: (response)=>{\r\n\t        \t//@ts-ignore\r\n\t\t\t\tfileDownload(response, filename);\r\n\t\t\t},\r\n\t\t\terror: ()=>{}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nconst index = new Index();\r\nindex.init();"]}